<div class="">

    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">我的头像</h3>
        </div>
        <div class="panel-body">
            <form class="form-horizontal register-form mt20" enctype="multipart/form-data"  role="form" method="post" action="<{:url('User/EditIcon')}>">
                <div class="form-group">
                    <label for="icon" class="col-sm-3 control-label">头像</label>
                    <div class="col-sm-4">
                        <label>
                            <input type="file" class="form-control" name="icon" id="icon" style="display: none;"/>
                            <empty name="icon">
                                <img src="IMAGE_URL/noface.gif" alt="" id="pic" style="width: 200px;height:200px;">
                                <else/>
                                <img src="UPLOAD_PATH/<?=$_SESSION['home']['userInfo']['icon']?>" alt="" id="pic" style="width: 200px;height:200px;">
                            </empty>

                        </label>
                    </div>
                </div>
                <script>
                    $(function() {
                        $("#pic").click(function () {
                            $("#icon").on("change",function(){
                                var objUrl = getObjectURL(this.files[0]) ; //获取图片的路径，该路径不是图片在本地的路径
                                if (objUrl) {
                                    $("#pic").attr("src", objUrl) ; //将图片路径存入src中，显示出图片
                                }
                            });
                        });
                    });

                    //建立一個可存取到該file的url
                    function getObjectURL(file) {
                        var url = null ;
                        if (window.createObjectURL!=undefined) { // basic
                            url = window.createObjectURL(file) ;
                        } else if (window.URL!=undefined) { // mozilla(firefox)
                            url = window.URL.createObjectURL(file) ;
                        } else if (window.webkitURL!=undefined) { // webkit or chrome
                            url = window.webkitURL.createObjectURL(file) ;
                        }
                        return url ;
                    }
                </script>
                <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-4">
                        <button type="submit" class="btn btn-default" style="width: 100%">上传</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>